<!DOCTYPE html><html lang="en"> <head><meta charset="UTF-8"><meta name="viewport" content="width=device-width"><link rel="icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="sitemap" href="/sitemap-index.xml"><link rel="canonical" href="https://www.greglturnquist.com/blog/why-use-spring-python-and-not-just/"><meta name="generator" content="Astro v5.6.0"><title>Why use Spring Python and not just plain python? | Greetings, Programs!</title><script async src="https://www.googletagmanager.com/gtag/js?id=G-X8BZNP13K6"></script> <script type="module">
    window.dataLayer = window.dataLayer || [];
    function a() { dataLayer.push(arguments); }
    a("js", new Date());
    a("config", "G-X8BZNP13K6");
</script><meta name="description" content="I have bumped into articles and forum postings, blog entries, other blog entries, and yet more blog entries. In fact, while writing this blo"><meta name="robots" content="index, follow"><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link href="https://fonts.googleapis.com/css2?family=Bruno+Ace+SC&family=Noto+Sans+KR:wght@100..900&display=swap" rel="stylesheet"><!-- Open Graph / Facebook --><meta property="og:type" content="website"><meta property="og:url" content="https://www.greglturnquist.com/blog/why-use-spring-python-and-not-just/"><meta property="og:title" content="Why use Spring Python and not just plain python? | Greetings, Programs!"><meta property="og:description" content="I have bumped into articles and forum postings, blog entries, other blog entries, and yet more blog entries. In fact, while writing this blo"><!-- Twitter --><meta property="twitter:card" content="summary_large_image"><meta property="twitter:url" content="https://www.greglturnquist.com/blog/why-use-spring-python-and-not-just/"><meta property="twitter:title" content="Why use Spring Python and not just plain python? | Greetings, Programs!"><meta property="twitter:description" content="I have bumped into articles and forum postings, blog entries, other blog entries, and yet more blog entries. In fact, while writing this blo"><link rel="stylesheet" href="/_astro/_page_.C-W6nMLw.css"></head> <body data-theme="dionysus"> <header class="fixed top-0 z-50 w-full left-0"> <div class="site-container mx-auto px-4 mt-4"> <div class="flex justify-between items-center bg-white py-4 rounded-lg px-4 border-black border"> <a href="/" class="logo uppercase font-logo transition-colors duration-200 font-light text-header-logo hover:text-primary">  <img src="/_astro/astro.Dm8K3lV8_tfbSl.svg" alt width="115" height="48" loading="lazy" decoding="async" class="hidden"> <span class="font-bold">Greetings</span> Programs!
</a> <nav class="relative flex items-center gap-2 lg:gap-8" aria-label="Site Navigation"> <!-- Desktop Menu --> <ul class="hidden lg:flex lg:gap-8 items-center"> <li class="relative group"> <div class="flex items-center gap-1"> <a href="/bio" class="text-small font-medium rounded-md px-2 py-1 focus:outline-none focus:ring-2 focus:ring-nav-text-active text-nav-text hover:text-nav-text-hover"> About Greg  </a> </div>  </li><li class="relative group"> <div class="flex items-center gap-1"> <a href="/books" class="text-small font-medium rounded-md px-2 py-1 focus:outline-none focus:ring-2 focus:ring-nav-text-active text-nav-text hover:text-nav-text-hover"> Books  </a> </div>  </li><li class="relative group"> <div class="flex items-center gap-1"> <a href="/blog" class="text-small font-medium rounded-md px-2 py-1 focus:outline-none focus:ring-2 focus:ring-nav-text-active text-nav-text-current font-semibold" aria-current="page"> Blog  </a> </div>  </li> </ul> <a href="/contact" class="group relative inline-flex overflow-hidden items-center justify-center rounded-border-small font-medium transition-all duration-300 ease-out focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 rounded-md flex items-center gap-2 bg-primary text-white hover:bg-primary-light focus-visible:ring-primary hover:ring-2 hover:ring-primary hover:ring-offset-2 h-10 px-4 py-2 text-small " aria-disabled="false"> <span class="absolute left-0 -mt-12 h-32 w-1/2 translate-x-[250%] rotate-12 bg-white opacity-20 transition-all duration-250 ease-out group-hover:translate-x-[2%]"></span> Contact Us </a> <!-- Mobile Menu Button --> <button class="mobile-menu-button relative z-30 p-2 border-none cursor-pointer bg-transparent lg:hidden" aria-label="Toggle Menu" aria-expanded="false"> <span class="menu-icon block"> <svg xmlns="http://www.w3.org/2000/svg" stroke-width="2" width="24" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" fill="none" viewBox="0 0 24 24" class="lucide lucide-menu text-body-base">  <line x1="4" x2="20" y1="12" y2="12"></line> <line x1="4" x2="20" y1="6" y2="6"></line> <line x1="4" x2="20" y1="18" y2="18"></line>  </svg> </span> <span class="close-icon hidden"> <svg xmlns="http://www.w3.org/2000/svg" stroke-width="2" width="24" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" fill="none" viewBox="0 0 24 24" class="lucide lucide-x text-white">  <path d="M18 6 6 18"></path> <path d="m6 6 12 12"></path>  </svg> </span> </button> <!-- Mobile Menu Panel --> <div class="mobile-menu fixed inset-0 z-20 px-8 pt-20 bg-primary lg:hidden hidden opacity-0 scale-95 transform transition-all duration-200 ease-out overflow-y-auto"> <ul class="flex flex-col gap-4"> <li> <div class="text-white"> <div class="flex items-center justify-between"> <a href="/bio" class="py-1 rounded-md focus:outline-none focus:ring-2 focus:ring-nav-mobile-text-active text-nav-mobile-text hover:text-nav-mobile-text-hover"> About Greg </a>  </div>  </div> </li><li> <div class="text-white"> <div class="flex items-center justify-between"> <a href="/books" class="py-1 rounded-md focus:outline-none focus:ring-2 focus:ring-nav-mobile-text-active text-nav-mobile-text hover:text-nav-mobile-text-hover"> Books </a>  </div>  </div> </li><li> <div class="text-white"> <div class="flex items-center justify-between"> <a href="/blog" class="py-1 rounded-md focus:outline-none focus:ring-2 focus:ring-nav-mobile-text-active text-nav-mobile-text-current font-semibold" aria-current="page"> Blog </a>  </div>  </div> </li> </ul> <!-- Updated mobile CTA button styling --> <div class="mt-8 pb-8"> <a href="/contact" class="group relative inline-flex overflow-hidden items-center justify-center rounded-border-small font-medium transition-all duration-300 ease-out focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 rounded-md flex items-center gap-2 text-white ring-2 ring-white focus-visible:ring-white hover:ring-2 hover:ring-black hover:ring-offset-2 h-10 px-4 py-2 text-small " aria-disabled="false"> <span class="absolute left-0 -mt-12 h-32 w-1/2 translate-x-[250%] rotate-12 bg-white opacity-20 transition-all duration-250 ease-out group-hover:translate-x-[2%]"></span> Contact Us </a> </div> </div> </nav> </div> </div></header> <script type="module">const v=document.querySelectorAll(".group");v.forEach(s=>{const e=s.querySelector("a"),t=s.querySelector(".submenu"),n=t?.querySelectorAll("a");t&&e&&(s.addEventListener("mouseenter",()=>{l(t,e)}),s.addEventListener("mouseleave",()=>{i(t,e)}),e.addEventListener("keydown",c=>{c.key==="ArrowDown"&&s.children&&(c.preventDefault(),l(t,e),n?.[0]?.focus())}),e.addEventListener("focus",()=>{i(t,e)}),n?.forEach((c,a)=>{c.addEventListener("keydown",d=>{const m=n.length-1;switch(d.key){case"ArrowDown":d.preventDefault(),a<m&&n[a+1].focus();break;case"ArrowUp":d.preventDefault(),a>0?n[a-1].focus():(e.focus(),i(t,e));break;case"Escape":d.preventDefault(),i(t,e),e.focus();break;case"Tab":i(t,e);break}})}),document.addEventListener("focusin",c=>{s&&!s.contains(c.target)&&i(t,e)}))});function l(s,e){s.classList.remove("invisible","opacity-0"),s.classList.add("visible","opacity-100"),e.setAttribute("aria-expanded","true")}function i(s,e){s.classList.add("invisible","opacity-0"),s.classList.remove("visible","opacity-100"),e.setAttribute("aria-expanded","false")}document.querySelectorAll(".mobile-submenu-button").forEach(s=>{s.addEventListener("click",()=>{const e=s.parentElement?.nextElementSibling,t=s.querySelector("svg");if(e){e.classList.toggle("hidden"),t?.classList.toggle("rotate-180");const n=e.classList.contains("hidden")?"false":"true";s.setAttribute("aria-expanded",n)}})});const f=document.querySelector(".mobile-menu-button"),o=document.querySelector(".mobile-menu"),r=document.querySelector(".menu-icon"),u=document.querySelector(".close-icon");f?.addEventListener("click",()=>{o?.classList.contains("hidden")?(document.body.style.overflow="hidden",o?.classList.remove("hidden"),requestAnimationFrame(()=>{o?.classList.remove("opacity-0","scale-95"),o?.classList.add("opacity-100","scale-100")}),r?.classList.add("hidden"),u?.classList.remove("hidden")):(document.body.style.overflow="",o?.classList.add("opacity-0","scale-95"),o?.classList.remove("opacity-100","scale-100"),setTimeout(()=>{o?.classList.add("hidden")},200),r?.classList.remove("hidden"),u?.classList.add("hidden"))});</script>  <div class="w-full h-120 absolute top-0 left-0 z-0 overflow-hidden border-b border-black">  </div> <article class="site-container--small mx-auto px-4 prose relative z-10 pb-base"> <div class="mt-42 mb-12 text-center"> <h1>Why use Spring Python and not just plain python?</h1> <div class="flex items-center justify-center gap-4 text-gray-600"> <time datetime="2009-02-01T08:17:00.000Z" class="text-sm text-body-base"> February 1st, 2009 </time> <div class="flex flex-wrap gap-2"> <span class="px-2 py-1 text-sm rounded-sm bg-primary/10 text-primary border-primary border flex items-center justify-center leading-none font-medium"> Spring Python </span><span class="px-2 py-1 text-sm rounded-sm bg-primary/10 text-primary border-primary border flex items-center justify-center leading-none font-medium"> Python </span> </div> </div> </div>  <div class="mt-8"> <p>I have bumped into articles and <a href="http://translate.google.com/translate?prev=hp&#x26;hl=en&#x26;u=http%3A%2F%2Fwww.python-forum.de%2Ftopic-17579.html&#x26;sl=de&#x26;tl=en">forum postings</a>, <a href="http://www.dennis-kempin.de/python/dependency-injection-in-python/">blog entries</a>, <a href="http://www.traceback.org/2008/09/08/ann-snake-guice-preview-a-dependency-injection-framework/">other blog entries</a>, and <a href="http://www.traceback.org/2009/01/01/article-help-dependency-injection-in-python/">yet more blog entries</a>. In fact, while writing this blog entry, someone posed the question “<a href="http://forum.springframework.org/showthread.php?t=66660">what is the aim of Spring Python?</a>” (Click and see my answer.) There are a diverse range of view points, and many in disagreement about the viability of DI in python.</p>
<p>Many of these opinions raise a good question. Why do you need some complicated thing like Spring Python when you could be using pure python to do your job? I was very impressed with Jamis’ article <a href="http://weblog.jamisbuck.org/2008/11/9/legos-play-doh-and-programming">LEGOs, Play-Doh, and Programming</a>. The core question is, why use complicated Java idioms that can be easily and dynamically expressed in pure ruby? I value this article because it encourages me to recheck my assumptions and ideas. It doesn’t matter how good your solution is. If you built it on a platform of invalid, unwise, or ridiculous assumptions, you probably aren’t going anywhere fast.</p>
<h3 id="so-what-are-my-assumptions">So, what ARE my assumptions?</h3>
<ul>
<li>
<p>Being able to apply extra services to my code without touching the code is good.</p>
</li>
<li>
<p>Being able to inject test dummies into my code without editing my code is good.</p>
</li>
<li>
<p>Simplifying and reducing code volume is good.</p>
</li>
<li>
<p>Using fancy tricks that are hard to read the next day is bad.</p>
</li>
<li>
<p>Using Problem A’s solution for Problem B without analysis is dumb.</p>
</li>
</ul>
<p>I want to compare this against what some people may think my assumptions are.</p>
<ul>
<li>
<p>XML is the way to configure everything.</p>
</li>
<li>
<p>Java’s solutions are perfect for Python.</p>
</li>
<li>
<p>Dependency Injection should be used for every problem.</p>
</li>
</ul>
<p>Let’s look at this in closer detail. Hopefully, I can show some insight into places where I think Spring Python can help, and other places it would be overkill to use it. Nothing works everywhere, right?</p>
<h3 id="being-able-to-apply-extra-services-to-my-code-without-touching-the-code-is-good---true">Being able to apply extra services to my code without touching the code is good - <em>True</em></h3>
<p>The first couple of things I can think of are transactions and security. These are functions, that when you implement them by hand, are a pain in the neck! You keep writing the same boilerplate plumbing code wrapping logical blocks, and you have to do it right every time, or you may find yourself in a big hole.</p>
<p>Sure, any part of your code not working correctly is an issue. But this isn’t YOUR code we are talking about. This is simply a layer of protection you are trying to wrap around code to make it safe. There isn’t a whole lot of logic in transactions or security, just simple, copy-and-pasted stuff you need. And we know what risk we are at when copy-and-paste starts happening.</p>
<p>That is the definite code smell that AOP is needed. Spring Python provides an AOP solution. You can write any type of advice you need. But considering how prevalant transactions and security are, we went ahead and coded a flexible, pythonic way to do it.</p>
<p>But don’t forget. The premise is that this is applied without modifying your working code or your calling code. If only we could have something that sat between the business code and the “main” function that calls the code, which managed instantiation of dependencies, and which we could modify with no impact…you mean, like an IoC container?</p>
<p>I know what you’re thinking. “Oh no! Not that XML stuff! I want to stick to python.” Who said you have to use XML? You can code your transactions <a href="http://springpython.webfactional.com/reference/html/transaction.html#transaction-at-transactional">simply using python decorators and a pure python container</a>. XML is only provided to help people coming from Java-land migrate to Python. Some people like XML. Some people don’t. Its a choice, not a requirement.</p>
<p>I know there is something else to consider. If I’m using TDD and I am spotting the places where I need to make changes, why can’t I just make the changes right then and there? If there is only one time and one place where you are injecting your AOP advice, you are probably right. It is when you need to apply one piece of advice in multiple places where you start doing the copy-and-paste routine. And when you need to add more advice, and repeat this whole process over again where things get costly. Instead, one refactoring to expose that service as an injection point, and you can easily adjust things in the future.</p>
<h3 id="being-able-to-inject-test-dummies-into-my-code-without-editing-my-code-is-good---true">Being able to inject test dummies into my code without editing my code is good - <em>True</em></h3>
<p>Testability of dynamic code is key. We preach that dynamic typing works, provided you adequately test your code. If you remember anything from your computer engineering courses in college, the more components you have, the greater the number of permutations of state. Being able to isolate functionality is the way to increase confidence in test cases, and that means we need to be able to replace production dependencies with test doubles.</p>
<p>It is easy to get caught up in the “I want to inject everything” hype. Don’t! Instead, only inject key things. TDD will expose what test doubles you want to inject, and thus what parts need to be wired by IoC. If your application is small enough, you may not need any at all. And that’s alright! Perhaps you start off, and all you need to inject is a database test double. Assuming you have defined <strong>MyApp</strong> and <strong>DataAccess</strong>, your container definition can be as simple as:</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="plaintext"><code><span class="line"><span>class MyAppContext(PythonConfig):  </span></span>
<span class="line"><span>    def \_\_init\_\_(self):  </span></span>
<span class="line"><span>        super(MyAppContext, self).\_\_init\_\_()  </span></span>
<span class="line"><span>  </span></span>
<span class="line"><span>    @Object  </span></span>
<span class="line"><span>    def my\_app(self):  </span></span>
<span class="line"><span>        return MyApp(self.data\_access())  </span></span>
<span class="line"><span>  </span></span>
<span class="line"><span>    @Object  </span></span>
<span class="line"><span>    def data\_access(self):  </span></span>
<span class="line"><span>        return MyDataAccess()</span></span></code></pre>
<p>For your test case, you just need an alternative:</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="plaintext"><code><span class="line"><span>class MyTestableAppContext(MyAppContext):  </span></span>
<span class="line"><span>    def \_\_init\_\_(self):  </span></span>
<span class="line"><span>        super(MyTestableAppContext, self).\_\_init\_\_()  </span></span>
<span class="line"><span>  </span></span>
<span class="line"><span>    @Object  </span></span>
<span class="line"><span>    def data\_access(self):  </span></span>
<span class="line"><span>        return DataAccessStub()</span></span></code></pre>
<p>How hard was that? You just extend your existing container, overriding a key injection point, and poof! You’re there with a nicely isolated, testable version of your code! I don’t know about you, but that is arguably a DSL, written in pure python.</p>
<h3 id="simplifying-and-reducing-code-volume-is-good---true">Simplifying and reducing code volume is good - <em>True</em></h3>
<p>I mentioned transactions earlier. Let’s look at an <strong>ugly example of some code with transactions</strong>:</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="plaintext"><code><span class="line"><span>class Bank:  </span></span>
<span class="line"><span>    def \_\_init\_\_(self):  </span></span>
<span class="line"><span>        self.factory = factory.MySQLConnectionFactory("springpython", "springpython", "localhost", "springpython")  </span></span>
<span class="line"><span>        self.dt = DatabaseTemplate(self.factory)  </span></span>
<span class="line"><span>  </span></span>
<span class="line"><span>    def balance(self, account\_num):  </span></span>
<span class="line"><span>        results = self.dt.query\_for\_list("select BALANCE from ACCOUNT where ACCOUNT\_NUM = %s", (account\_num,))  </span></span>
<span class="line"><span>        if len(results) != 1:  </span></span>
<span class="line"><span>            raise InvalidBankAccount("There were %s accounts that matched %s." % (len(results), account\_num))  </span></span>
<span class="line"><span>        return results[0][0]  </span></span>
<span class="line"><span>  </span></span>
<span class="line"><span>    def withdraw(self, amount, source\_account\_num):  </span></span>
<span class="line"><span>        if self.balance(source\_account\_num) &#x3C; amount:  </span></span>
<span class="line"><span>            raise InsufficientFunds("Account %s did not have enough funds to transfer %s" % (source\_account\_num, amount))  </span></span>
<span class="line"><span>        self.dt.execute("update ACCOUNT set BALANCE = BALANCE - %s where ACCOUNT\_NUM = %s", (amount, source\_account\_num))  </span></span>
<span class="line"><span>  </span></span>
<span class="line"><span>    def deposit(self, amount, target\_account\_num):  </span></span>
<span class="line"><span>        self.balance(target\_account\_num) # Implicitly testing for valid account number  </span></span>
<span class="line"><span>        self.dt.execute("update ACCOUNT set BALANCE = BALANCE + %s where ACCOUNT\_NUM = %s", (amount, target\_account\_num))  </span></span>
<span class="line"><span>  </span></span>
<span class="line"><span>    def transfer(self, transfer\_amount, source\_account\_num, target\_account\_num):  </span></span>
<span class="line"><span>        try:  </span></span>
<span class="line"><span>            cursor = self.factory.getConnection().cursor() # DB-2.0 API spec says that creating a cursor implicitly starts a transaction  </span></span>
<span class="line"><span>            self.withdraw(transfer\_amount, source\_account\_num)  </span></span>
<span class="line"><span>            self.deposit(transfer\_amount, target\_account\_num)  </span></span>
<span class="line"><span>            self.factory.getConnection().commit()  </span></span>
<span class="line"><span>            cursor.close() # There wasn't anything in this cursor, but it is good to close an opened cursor  </span></span>
<span class="line"><span>        except InvalidBankAccount, InsufficientFunds:  </span></span>
<span class="line"><span>            self.factory.getConnection().rollback()</span></span></code></pre>
<p>If you can rip out that plumbing code, your code becomes cleaner, easier to read, and easier to maintain. The following shows the code where you don’t have to explicitly manage the transaction. Instead, it is declared using a python decorator.</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="plaintext"><code><span class="line"><span>class Bank:  </span></span>
<span class="line"><span>    def \_\_init\_\_(self):  </span></span>
<span class="line"><span>        self.factory = factory.MySQLConnectionFactory("springpython", "springpython", "localhost", "springpython")  </span></span>
<span class="line"><span>        self.dt = DatabaseTemplate(self.factory)  </span></span>
<span class="line"><span>  </span></span>
<span class="line"><span>    def balance(self, account\_num):  </span></span>
<span class="line"><span>        results = self.dt.query\_for\_list("select BALANCE from ACCOUNT where ACCOUNT\_NUM = %s", (account\_num,))  </span></span>
<span class="line"><span>        if len(results) != 1:  </span></span>
<span class="line"><span>            raise InvalidBankAccount("There were %s accounts that matched %s." % (len(results), account\_num))  </span></span>
<span class="line"><span>        return results[0][0]  </span></span>
<span class="line"><span>  </span></span>
<span class="line"><span>    def withdraw(self, amount, source\_account\_num):  </span></span>
<span class="line"><span>        if self.balance(source\_account\_num) &#x3C; amount:  </span></span>
<span class="line"><span>            raise InsufficientFunds("Account %s did not have enough funds to transfer %s" % (source\_account\_num, amount))  </span></span>
<span class="line"><span>        self.dt.execute("update ACCOUNT set BALANCE = BALANCE - %s where ACCOUNT\_NUM = %s", (amount, source\_account\_num))  </span></span>
<span class="line"><span>  </span></span>
<span class="line"><span>    def deposit(self, amount, target\_account\_num):  </span></span>
<span class="line"><span>        self.balance(target\_account\_num) # Implicitly testing for valid account number  </span></span>
<span class="line"><span>        self.dt.execute("update ACCOUNT set BALANCE = BALANCE + %s where ACCOUNT\_NUM = %s", (amount, target\_account\_num))  </span></span>
<span class="line"><span>  </span></span>
<span class="line"><span>    @transactional(["PROPAGATION\_REQUIRED"])  </span></span>
<span class="line"><span>    def transfer(self, transfer\_amount, source\_account\_num, target\_account\_num):  </span></span>
<span class="line"><span>        self.withdraw(transfer\_amount, source\_account\_num)  </span></span>
<span class="line"><span>        self.deposit(transfer\_amount, target\_account\_num)</span></span></code></pre>
<p>If you focus your attention on the <strong>transfer</strong> method, you should notice an improvement in readability. At first, maybe it doesn’t like much. But try to visualize cleaning up a whole slew of transactional blocks of code you have to maintain, and the benefits starts to add up.</p>
<p>Also, I don’t know if you noticed, but the <strong>withdraw</strong> and <strong>deposit</strong> operations <em>aren’t safe enough</em> to be part of the public API. They need to be transactional as well. So why aren’t they? Well, I wanted this to be an apples-to-apples comparison. You can’t just blindly wrap the first sample of deposit with a transaction, because the transfer function may have already started a transaction. You need to test to see if you are already part of a transactions.</p>
<p>Guess what: @transactional handles this for you. The second example is easy. <strong>Just put @transactional in front of withdraw and deposit and you are done.</strong> The PROPAGATION_REQUIRED tag indicates a transaction will be started if one doesn’t already exist. Doing this with the first example would have required hand-written code to track whether you were in or out of transactions.</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="plaintext"><code><span class="line"><span>class Bank:  </span></span>
<span class="line"><span>    def \_\_init\_\_(self):  </span></span>
<span class="line"><span>        self.factory = factory.MySQLConnectionFactory("springpython", "springpython", "localhost", "springpython")  </span></span>
<span class="line"><span>        self.dt = DatabaseTemplate(self.factory)  </span></span>
<span class="line"><span>  </span></span>
<span class="line"><span>    def balance(self, account\_num):  </span></span>
<span class="line"><span>        results = self.dt.query\_for\_list("select BALANCE from ACCOUNT where ACCOUNT\_NUM = %s", (account\_num,))  </span></span>
<span class="line"><span>        if len(results) != 1:  </span></span>
<span class="line"><span>            raise InvalidBankAccount("There were %s accounts that matched %s." % (len(results), account\_num))  </span></span>
<span class="line"><span>        return results[0][0]  </span></span>
<span class="line"><span>  </span></span>
<span class="line"><span>    @transactional(["PROPAGATION\_REQUIRED"])  </span></span>
<span class="line"><span>    def withdraw(self, amount, source\_account\_num):  </span></span>
<span class="line"><span>        if self.balance(source\_account\_num) &#x3C; amount:  </span></span>
<span class="line"><span>            raise InsufficientFunds("Account %s did not have enough funds to transfer %s" % (source\_account\_num, amount))  </span></span>
<span class="line"><span>        self.dt.execute("update ACCOUNT set BALANCE = BALANCE - %s where ACCOUNT\_NUM = %s", (amount, source\_account\_num))  </span></span>
<span class="line"><span>  </span></span>
<span class="line"><span>    @transactional(["PROPAGATION\_REQUIRED"])  </span></span>
<span class="line"><span>    def deposit(self, amount, target\_account\_num):  </span></span>
<span class="line"><span>        self.balance(target\_account\_num) # Implicitly testing for valid account number  </span></span>
<span class="line"><span>        self.dt.execute("update ACCOUNT set BALANCE = BALANCE + %s where ACCOUNT\_NUM = %s", (amount, target\_account\_num))  </span></span>
<span class="line"><span>  </span></span>
<span class="line"><span>    @transactional(["PROPAGATION\_REQUIRED"])  </span></span>
<span class="line"><span>    def transfer(self, transfer\_amount, source\_account\_num, target\_account\_num):  </span></span>
<span class="line"><span>        self.withdraw(transfer\_amount, source\_account\_num)  </span></span>
<span class="line"><span>        self.deposit(transfer\_amount, target\_account\_num)</span></span></code></pre>
<p>To tell you the truth, writing functional code <strong>I can maintain</strong> is my #1 goal in software development. I have inherited many projects that were impossible to read. They worked, but because they were so poorly done, I couldn’t enhance or improve them, and thus began the refactor/rewrite.</p>
<h3 id="using-fancy-tricks-that-are-hard-to-read-the-next-day-is-bad---true">Using fancy tricks that are hard to read the next day is bad - <em>True</em></h3>
<p>Only use Spring Python if you need it. And only use what you need. If you really need to mark up transactions in your code, this is perfect. But if your tool doesn’t need that protection, forget about it! If your tool needs rigorous testing, utilize the IoC container to inject test doubles. But if you are writing a simple admin tool, then perhaps you don’t need any IoC at all. Same goes for all the features.</p>
<p>If you need IoC and you are used to reading XML-configured app contexts (perhaps because you used to write Java code a lot), then you can easily utilize the functionality of Spring Python. But if you have been a pythonista since day one, forget about it! Use the pure python, decorator based container, and don’t waste one minute on XML.</p>
<h3 id="using-problem-as-solution-for-problem-b-without-analysis-is-dumb---true">Using Problem A’s solution for Problem B without analysis is dumb - <em>True</em></h3>
<p>Just because an AOP transactional interceptor was what you needed for Problem A, doesn’t mean you need it for Problem B. And don’t assume that your strategy of IoC injection points for Problem A will map cleanly to Problem B. Again, <strong>TDD should help you expose the injection points</strong>. I can’t possibly predict where you need to inject dependencies. That is what software analysis is for.</p>
<p>Anyone can pick up and use a library. But using it for your needs (and not mine) is where judgment calls come in. Your experience in using tools to solve problems is needed to figure out what parts of Spring Python will serve your needs.</p>
<h3 id="xml-is-the-way-to-configure-everything---false">XML is the way to configure everything - <em>False</em></h3>
<p>This is a false assumption, and unfortunately an oft repeated one. Notice that there was no XML to be found in my samples? I stuck with pure python, using what I argue is similar to a DSL. Consider writing your code to have some fluent APIs, and the pure python IoC container can easily and efficiently wire your application together as needed. I have also done my best to update documentation to show configuring things either way. Whether or not the documentation is up-to-date, please remember, you can ALWAYS stick with pure python.</p>
<h3 id="javas-solutions-are-perfect-for-python---false">Java’s solutions are perfect for Python - <em>False</em></h3>
<p>I already wrote how <a href="http://blog.springpython.webfactional.com/index.php/2008/11/23/spring-python-isn-t-a-simple-port-of-the">Spring Python is not just a simple port</a>. The idea is to <strong>grab higher level concepts</strong> that transcend languages, and <strong>see where they apply</strong>. Some perceive this as grabbing Java’s solutions and dropping them into Python. It’s not. I know a dozen or so computer languages (C, C++, Tcl, tk, expect, PERL, java, python, csh, bash, Forte 4GL, and more), and some problems I find occur no matter where I go. Some carry a similar solution, some don’t. The key factor is, many of these problems need a solution that looks similar from 10,000 feet, but when you look deeper, the details are very different. That is what Spring Python strives for: solving some of the same high level concepts, where the high level perspective looks similar, but the details use the power and idioms of python. If you perceive one of my ideas as being out-of-whack, please <a href="http://forum.springframework.org/forumdisplay.php?f=45">drop me a comment</a>, and I will be happy to discuss it.</p>
<h3 id="dependency-injection-should-be-used-for-every-problem---false">Dependency Injection should be used for every problem - <em>False</em></h3>
<p>You need look no further than at <a href="https://fisheye.springframework.org/browse/se-springpython-py/tags/springpython-release-1.0.0-RC1/src/plugins/coily?r=460">coily, our command line tool</a>, to see that some solutions <strong>don’t require any Spring Python</strong>. Instead, good ole’ raw python does the trick. Use Spring Python sparingly, and when it improves your efficiency, NOT just for the sake of using. This is the type of critical judgment you should apply to any library you utilize. Use what you need to solve your TDD test cases, and when they pass STOP! Move away from the keyboard. You are done.</p>
<h3 id="conclusion">Conclusion</h3>
<p>I will say I have presented at least a minimal case that I’m not really using Java idioms, but instead solving higher level problems. People may assume I am reusing the idioms considering my library was inspired by one written in Java. But you really need to peel back the layers and see what is happening. This is true for any library you use. Look at the <a href="http://springpython.webfactional.com/reference/html/index.html">documentation we provide</a> and <a href="https://fisheye.springframework.org/browse/se-springpython-py">inspect the source code</a>, and see if you can spot any anonymous inner classes, or getter &#x26; setters. You won’t find them. Instead, you find anonymous functions, python iterators, usage of standard python libraries, etc, and what I consider a slim-and-trim library of functionality. And on top of that, lots of documentation on how to use it along with a solid <a href="http://forum.springframework.org/forumdisplay.php?f=45">forum of support</a>. Makes it more than just a random recipe posted somewhere, and subject to discovery by google.</p> </div> </article>  <footer class="bg-black text-white pb-small "> <div class="site-container mx-auto px-4"> <!--{!cta.hideCta && (--> <!--  <div class="text-center border-b border-background-light mb-12 py-small">--> <!--    <h2 class="text-3xl font-bold mb-4" data-aos="fade-up">{cta.title}</h2>--> <!--    <p class="text-white mb-6 max-w-2xl mx-auto" data-aos="fade-up" data-aos-delay="100">--> <!--      {cta.description}--> <!--    </p>--> <!--    <Button--> <!--      href={cta.button.link}--> <!--      variant="ghostLight"--> <!--      size="lg"--> <!--      data-aos="fade-up"--> <!--      data-aos-delay="200"--> <!--      {...(cta.button.target && { target: cta.button.target })}--> <!--    >--> <!--      {cta.button.text}--> <!--    </Button>--> <!--  </div>--> <!--)}--> <div class="grid grid-cols-1 md:grid-cols-4 gap-8 pb-8 border-b border-background-light"> <div class="col-span-1"> <a href="/" class="logo uppercase font-logo transition-colors duration-200 font-light text-footer-logo hover:text-primary">  <img src="/_astro/astro.Dm8K3lV8_tfbSl.svg" alt width="115" height="48" loading="lazy" decoding="async" class="hidden"> <span class="font-bold">Greetings</span> Programs!
</a> <p class="mt-4 text-white">
Searching the universe of software development for answers
</p> </div> <div class="col-span-1"> <h3 class="text-lg font-semibold mb-4">Quick Links</h3> <nav> <ul class="space-y-2"> <li><a href="/" class="text-body-dark hover:text-white transition-colors">Home</a></li><li><a href="/bio" class="text-body-dark hover:text-white transition-colors">About Greg</a></li><li><a href="/whitelist-instructions" class="text-body-dark hover:text-white transition-colors">Whitelist Instructions</a></li> </ul> </nav> </div> </div> <div class="mt-8 flex flex-col md:flex-row justify-between items-center"> <div class="text-body-dark text-sm">
© 2025 Greg L. Turnquist. All rights reserved.
</div> <nav class="mt-4 md:mt-0"> <ul class="flex flex-wrap gap-6"> <li> <a href="/legal/privacy-policy" class="text-sm text-body-dark hover:text-white transition-colors"> Privacy Policy </a> </li><li> <a href="/legal/terms-of-service" class="text-sm text-body-dark hover:text-white transition-colors"> Terms of Service </a> </li> </ul> </nav> </div> </div> </footer> <!--<ThemeSwitcher />--> <script type="module" src="/_astro/Layout.astro_astro_type_script_index_0_lang.Cqrgs33o.js"></script> </body> </html>